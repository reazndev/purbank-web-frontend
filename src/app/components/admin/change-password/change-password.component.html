<div class="change-password-form">
  <h2>Change Password</h2>
  
  <form (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="currentPassword">Current Password</label>
      <div class="password-input-wrapper">
        <input
          [type]="showCurrentPassword ? 'text' : 'password'"
          id="currentPassword"
          name="currentPassword"
          [(ngModel)]="formState.currentPassword"
          required
          [disabled]="formState.loading"
        />
        <button
          type="button"
          class="password-toggle"
          (click)="togglePasswordVisibility('current')"
          [attr.aria-label]="showCurrentPassword ? 'Hide password' : 'Show password'"
        >
          {{ showCurrentPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
        </button>
      </div>
    </div>

    <div class="form-group">
      <label for="newPassword">New Password</label>
      <div class="password-input-wrapper">
        <input
          [type]="showNewPassword ? 'text' : 'password'"
          id="newPassword"
          name="newPassword"
          [(ngModel)]="formState.newPassword"
          required
          [disabled]="formState.loading"
          minlength="8"
        />
        <button
          type="button"
          class="password-toggle"
          (click)="togglePasswordVisibility('new')"
          [attr.aria-label]="showNewPassword ? 'Hide password' : 'Show password'"
        >
          {{ showNewPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
        </button>
      </div>
    </div>

    <div class="form-group">
      <label for="confirmationPassword">Confirm New Password</label>
      <div class="password-input-wrapper">
        <input
          [type]="showConfirmPassword ? 'text' : 'password'"
          id="confirmationPassword"
          name="confirmationPassword"
          [(ngModel)]="formState.confirmationPassword"
          required
          [disabled]="formState.loading"
          minlength="8"
        />
        <button
          type="button"
          class="password-toggle"
          (click)="togglePasswordVisibility('confirm')"
          [attr.aria-label]="showConfirmPassword ? 'Hide password' : 'Show password'"
        >
          {{ showConfirmPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
        </button>
      </div>
    </div>

    @if (formState.error) {
      <div class="error-message">{{ formState.error }}</div>
    }

    @if (formState.success) {
      <div class="success-message">{{ formState.success }}</div>
    }

    <button type="submit" [disabled]="formState.loading">
      {{ formState.loading ? 'Changing Password...' : 'Change Password' }}
    </button>
  </form>
</div>
